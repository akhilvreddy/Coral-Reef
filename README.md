# CoralReefAnalysis
Research project dealing with Coral Reefs and image detection.

## Abstract

The goal of this lab was to take a sample of coral reefs (based out of Honlulu, Hawaii) and then analyze their average RGB values to see if they are healthy. This was made possible by the use of YOLOV4 - an image detection software, some software that I wrote and put into an android device, and the knowledge of members from the Biochemistry department. 

The members from the biochemistry department would take a snap of a reef and it would look like this: 

<p align="center">
  <img 
    width="544"
    height="378"
    src="https://github.com/akhilvreddy/CoralReefAnalysis/blob/main/Mcap41.jpg"
  >
</p>

> [Picture 1] The red, blue, and green is the relative RGB values based on the camera that took the image, so we have to compare to those specific values. 

From this, we would have to detect the border of the image, find the average RBG value, do some more chemical analysis on it, and send it back to the biochemistry folks in order for them to analyze it more. In the following, I will explain what I did and how this came to fruition. 

## Starting this Project

I started off everything by writing a Java function that would be able to do border and image detection. I started off using an open source edge detector, but quickly realized that it would take a lot of processing power from the somewhat cheap phone that I was given. After some thinking, this is what I did next: 


<p align="center">
  <img 
    width="344"
    height="394"
    src="https://github.com/akhilvreddy/CoralReefAnalysis/blob/main/reefpic3.jpg"
  >
  <img 
    width="344"
    height="394"
    src="https://github.com/akhilvreddy/CoralReefAnalysis/blob/main/reefpic2.jpg"
  >
</p>

> [Picture 2 & 3] Picture 2 represents the kind of image generated by the YOLOV-4 software and picture 3 is the border detection I was aiming to do. 

I decided to compare pixels, and looped through the image using a nested for loop.

## How the Code Works
You can find the real code in the java file in this repository (Main.java), but I have included some pseudocode here to better understand it. 

```
for (int i = 0; i < image.width; i++){
  for (int j = 0; j < image.height; j++){
   
    if ( _condition_ )
      -> get RGB Value of pixel, understand the value, and keep it
   
   }
}

return averageRedValue, averageGreenValue, averageBlueValue, colorDensity, etc..
```

Here, the condition is the main part 
It's 0($n^2$), but it doesn't make the phone crash so I didn't mind. 

## Training the algorithm (.tflife file)
This part didn't require much coding, but rather some learning on how neural networks work. What we did was gather. 
We ran into some issues of the network not being too accurate at first and not detecting some of them, so we went back and trained the network further by importing and describing more images.

We used _**TensorFlow**_ and the ImageDataGenerator in python3 to do the analysis. The end goal of this was for the YOLOV-4 software to interpret the differnet coral in the pictures as shown in picture 2. Then I would take multiple different types of images like picture 2 for multiple coral, strengthen the border detection by using my above algorithm, and then outputting the values to the biochem people. 

## Demonstration

## Issues 

## Remarks 
I hope that this project is able to understand coral reefs more. By understanding the health and colors of the reef in a better fashion, it would benefit our environment and acquatic life. 
